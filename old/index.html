<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Hello!</title>

    <!-- import the webpage's stylesheet -->
    <link rel="stylesheet" href="/style.css" />

    <!-- import the webpage's javascript file -->
    <script src="/js/script.js" defer></script>

    <!-- fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Quicksand&display=swap" rel="stylesheet">

    <!-- A-Frame scripts -->
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-pointcloud-component/dist/aframe-pointcloud-component.min.js"></script>
    <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>

    <!-- Particles -->
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script src="/js/app.js"></script>

    <!-- SplitText 
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/1.9.0/TweenMax.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/textsplitr@0.1.1/index.min.js"></script>-->

    <!--<script src="node_modules/aframe-pointcloud-component/index.js"></script>

    <script src="/js/three.js"></script>
    <script type="module" src="/js/PLYLoader.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/three-ply-loader@1.0.0/index.min.js"></script>-->

  </head>
  <body>
    
    <div id="loading-wrapper">
      <div id="welcome">
        <div id="logo"></div>
        <pre id="description" class="splitText">

          When thinking about home, rather often the first image that comes to mind is a physical space. 
          However, even though that first thought is probably based on the need of a context, 
          the thoughts quickly turn into memories that go beyond the strict materiality of the house. 
          That is, really, where the combination of house and identity turn into what we usually define as home. 
          Home is the virtual house, 
          the time-based abstract layer generated by the inhabitant as a response to the urgency of translating their own identity into space.

        </pre>
        <button id="enterButton">Enter</button>
      </div>
      <p id="loadingText">loading...</p>
      <div id="particles-js"></div>
    </div>
    <div class="frontcontainer">
      
      <!--<div class="background-color"></div>-->

      <div id="videocontainer">
        <video id="vid0" class="video" preload="auto" loop>
          <source
            src="/AlvaroTotalTest1.mp4"
            type="video/mp4"
          />
          Your browser does not support the video tag.
        </video>

        <video id="vid1" class="video" preload="auto" loop>
          <source
            src="/MumTotalTest1.mp4"
            type="video/mp4"
          />
          Your browser does not support the video tag.
        </video>

        <video id="vid2" class="video" preload="auto" loop>
          <source
            src="/DadTotalTest1.mp4"
            type="video/mp4"
          />
          Your browser does not support the video tag.
        </video>
        
        
        
      </div>

      <!-- aframe scene -->
      <div id="aframe">
        
        <!--<script>

           
            if (typeof AFRAME === 'undefined') {
              throw new Error('Component attempted to register before AFRAME was available.');
            }

            /**
             * Point Cloud component for A-Frame.
             */
            AFRAME.registerComponent('pointcloud', {
              schema: {
                src: {
                  type: 'asset'
                },
                texture: {
                  type: 'asset'
                },
                size: {
                  type: 'number',
                  default: 1
                },
                opacity: {
                  type: 'number',
                  default: 1
                },
                depthWrite: {
                  type: 'boolean',
                  default: true
                },
              },

              multiple: false,

              init: function () {

                if (!this.data.src) {
                  console.warn("HOW I'M SUPOSSED TO LOAD A POINT CLOUD WITHOUT [%s] `src` DEFINED", this.name);
                  return;
                }

                const loader = new THREE.PLYLoader();
                
                const _this = this;
                loader.load(this.data.src, function (geometry) {

                  var material;
                  if (_this.data.texture) {
                    const sprite = new THREE.TextureLoader().load( _this.data.texture );
                    material = new THREE.PointsMaterial({
                      size: _this.data.size,
                      vertexColors: THREE.VertexColors,
                      map: sprite,
                      transparent: true,
                      opacity: _this.data.opacity,
                      depthWrite: _this.data.depthWrite,
                    });
                  } else {
                    material = new THREE.PointsMaterial({
                      size: _this.data.size,
                      vertexColors: THREE.VertexColors,
                      transparent: true,
                      opacity: _this.data.opacity,
                    });
                  }
                  _this.pointcloud = new THREE.Points(geometry, material);
                  _this.el.setObject3D('pointcloud', _this.pointcloud);
                });
              },

              remove: function () {},

            });

            AFRAME.registerPrimitive('a-pointcloud', {
              defaultComponents: {
                pointcloud: {}
              },
              mappings: {
              src: 'pointcloud.src',
              texture: 'pointcloud.texture',
              size: 'pointcloud.size',
              opacity: 'pointcloud.opacity',
              depthWrite: 'pointcloud.depthWrite'
              }
            });


        </script>-->

        <!-- scene -->
        <a-scene background="color: black" vr-mode-ui="enabled: false">
          <!-- assets -->
          <a-assets>
            <a-asset-item id="model1" src="/Despachoalvaro_Model_5.ply"></a-asset-item>
            <a-asset-item id="model2" src="/salon_Model_1M.ply"></a-asset-item>
            <a-asset-item id="model3" src="/DespachoMama2_Model_1M.ply"></a-asset-item>
            <a-asset-item id="model4" src="/garaje_Model_1Mtext.ply"></a-asset-item>
            <a-asset-item id="model5" src="/despachopapa_Model_1M.ply"></a-asset-item>
            <a-asset-item id="model6" src="/buhardilla_Model_1M.ply"></a-asset-item>
            <a-asset-item id="model7" src="/Cocina_Model_2_1M.ply"></a-asset-item>
            <a-asset-item id="model8" src="fotograf_aestudio_Model_1M.ply"></a-asset-item>
          </a-assets>

          <!-- composition -->
          <a-entity position="0 2.25 -15" particle-system="preset: dust; size: 0.5"></a-entity>
          <a-entity light="type: ambient; color: #CCC"></a-entity>
          <a-entity light="type: point; color: #CCC"></a-entity>
          <a-pointcloud id="bro" scale="1 1 1" position="0 -3 0" rotation="-90 0 0" src="#model1" size="0.01" opacity="1"
            depthWrite="false">
          </a-pointcloud>
          <a-pointcloud class="mum"scale="1.12562 1.12562 1.12562" position="1.34709 11.05206 6.60284" rotation="-90 87.65 0" src="#model2" size="0.01" opacity="1" depthwrite="false">
          </a-pointcloud>
          <a-pointcloud class="mum" scale="1 1 1" position="-0.67 25.967 -12.085" rotation="-90 173 0" src="#model3" size="0.01" opacity="1"
            depthWrite="false">
          </a-pointcloud>
          <a-pointcloud class="mum" scale="0.653 0.653 0.653" position="-0.919 -3 -30.195" rotation="-90 3.9 0" src="#model4" size="0.01" opacity="1"
            depthWrite="false">
          </a-pointcloud>
          <a-pointcloud class="dad" scale="0.7 0.7 0.7" position="-56.8 16.1 13.1" rotation="-90 -90 0" src="#model5" size="0.01" opacity="1" depthwrite="false">
          </a-pointcloud>
          <a-pointcloud class="bro" scale="0.7 0.7 0.7" position="-7.9 39.5 15.36" rotation="-90 -90 0" src="#model6" size="0.01" opacity="1" depthwrite="false">
          </a-pointcloud>
          <a-pointcloud class="cocina" scale="1 1 1" position="-13.17 11.68 -30.93" rotation="-90 -90 0" src="#model7" size="0.01" opacity="1" depthwrite="false">
          </a-pointcloud>
          <a-pointcloud class="cocina" scale="1.39359 1.39359 1.39359" position="-22.36026 -2.77955 -7.64953" rotation="-90 0 0" src="#model8" size="0.01" opacity="1" depthwrite="false" animation="property: rotation; to: 360 360 0; dur: 2000; easing: linear; loop: true">
          </a-pointcloud>
        
          <!--<a-pointcloud 
                  scale="0.1 0.1 0.1" 
                  position="0 0.08 -2.5" 
                  rotation="-90 45 0" 
                  src="url(/sculpt.ply)" 
                  size="0.01">
                </a-pointcloud>-->
        
          <a-entity camera look-controls wasd-controls="acceleration:300; fly: true" position="0 1.6 0"></a-entity>
        
        </a-scene>
      </div>
      
      <p class="rules" id="ruleVolume">Use the slider to interact with the volume panner. Try it!</p>
      <form class="slider" id="slidervolume">
        <div id="chars">
          <p class="tag">Char. 1</p>
          <p class="tag">Char. 2</p>
          <p class="tag">Char. 3</p>
        </div>
        <input
          type="range"
          name="vidPanner"
          id="vidPanner"
          value="0"
          min="-100"
          max="100"
          step="1"
        />
        <p id="tagSlider1" class="tag">Character Panner</p>
      </form>

      <p class="rules" id="ruleOpacity1">Here you can reduce the video opacity to reveal the background.</p>
      <form class="slider" id="slideropacity">
        <div id="opacityTag">
          <output id="rangevalue" class="tag">100</output>
          <p class="tag">Opacity Video</p>
        </div>
        <input
          type="range"
          name="bgopacity"
          id="bgopacity"
          value="100"
          min="0"
          max="100"
          step="1"
          oninput="rangevalue.value=value"
        />
        
      </form>
      <p class="rules" id="ruleOpacity2">When the opacity is at zero, you can interact with the background scene.</p>
      <p class="rules" id="ruleScene">Now you can navigate the scene.</p>

    </div>
  </body>
</html>
